version: "3.9"
services:
  portainer:
    image: portainer/portainer-ce:2.21.5
    container_name: portainer
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data:/data
    networks: [proxy]
    labels:
      - traefik.enable=true
      - traefik.http.routers.portainer.rule=Host(`portainer.${DOMAIN}`)
      - traefik.http.services.portainer.loadbalancer.server.port=9000
    restart: unless-stopped

  dozzle:
    image: amir20/dozzle:v8.5.2
    container_name: dozzle
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    networks: [proxy]
    labels:
      - traefik.enable=true
      - traefik.http.routers.dozzle.rule=Host(`logs.${DOMAIN}`)
      - traefik.http.services.dozzle.loadbalancer.server.port=8080
    restart: unless-stopped

  uptime-kuma:
    image: louislam/uptime-kuma:1
    container_name: uptime-kuma
    volumes:
      - ./kuma:/app/data
    networks: [proxy]
    labels:
      - traefik.enable=true
      - traefik.http.routers.kuma.rule=Host(`kuma.${DOMAIN}`)
      - traefik.http.services.kuma.loadbalancer.server.port=3001
    restart: unless-stopped
networks:
  proxy:
    external: true
